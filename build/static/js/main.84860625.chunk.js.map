{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","searchName","handleSearchChange","value","onChange","PersonForm","handleClickAdd","name","number","handleNameChange","handleNumberChange","onSubmit","type","Persons","persons","deletePersonHandler","filter","person","toLowerCase","includes","map","onClick","id","baseUrl","exports","getAllPersons","axios","get","then","response","data","addPerson","newObject","post","deletePerson","delete","updatePersonInfo","put","Notification","message","messageStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","App","useState","setPersons","info","setInfo","setSearchName","errorMessage","setErrorMessage","useEffect","personService","allPersons","handleSetMessage","setTimeout","event","target","preventDefault","nameObject","personsCopy","availableNameIndex","findIndex","index","window","confirm","changedInfo","catch","_","n","updatePhoneNumber","returnedPerson","concat","err","error","findPersonIndex","copyPersons","splice","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.84860625.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ searchName, handleSearchChange }) => (\n  <div>\n    Filter shown with:{\" \"}\n    <input value={searchName} onChange={handleSearchChange} />\n  </div>\n);\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({\n  handleClickAdd,\n  name,\n  number,\n  handleNameChange,\n  handleNumberChange,\n}) => {\n  return (\n    <form onSubmit={handleClickAdd}>\n      <div>\n        Name: <input value={name} onChange={handleNameChange} />\n      </div>\n      <br />\n      <div>\n        Number: <input value={number} onChange={handleNumberChange} />\n      </div>\n      <br />\n      <div>\n        <button type=\"submit\">Add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = ({ persons, searchName, deletePersonHandler }) => {\n  return (\n    <div>\n      {persons\n        .filter((person) =>\n          person.name.toLowerCase().includes(searchName.toLowerCase())\n        )\n        .map((person) => (\n          <p key={person.number}>\n            {person.name} {person.number}\n            <button onClick={() => deletePersonHandler(person.id)}>\n              Delete\n            </button>\n          </p>\n        ))}\n    </div>\n  );\n};\n\nexport default Persons;\n","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAllPersons = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst addPerson = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst updatePersonInfo = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject);\n};\n\nconst exports = {\n  getAllPersons,\n  addPerson,\n  deletePerson,\n  updatePersonInfo,\n};\n\nexport default exports;\n","import React from \"react\";\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n  const isError =\n    (message !== null &&\n      message.includes(\"has already been removed from server\")) ||\n    message.includes(\"validation failed\");\n  const messageStyle = {\n    color: isError ? \"red\" : \"green\",\n    background: \"lightgrey\",\n    fontSize: 20,\n    borderStyle: \"solid\",\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n  };\n\n  return (\n    <div>\n      <div style={messageStyle}>{message}</div>\n      <br />\n    </div>\n  );\n};\n\nexport default Notification;\n","import React, { useEffect, useState } from \"react\";\n\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [info, setInfo] = useState({ name: \"\", number: \"\" });\n  const [searchName, setSearchName] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAllPersons().then((allPersons) => {\n      setPersons(allPersons);\n    });\n  }, []);\n\n  const handleSetMessage = (message) => {\n    setErrorMessage(message);\n    setTimeout(() => {\n      setErrorMessage(null);\n    }, 3000);\n  };\n\n  const updatePhoneNumber = (index) => {\n    const personsCopy = [...persons];\n    const addConfirm = window.confirm(\n      `${personsCopy[index].name} is already added to phonebook, replacethe old number with a new one?`\n    );\n\n    if (!addConfirm) return;\n\n    const changedInfo = {\n      ...personsCopy[index],\n      number: info.number,\n    };\n    personService\n      .updatePersonInfo(personsCopy[index].id, changedInfo)\n      .then((response) => {\n        setPersons(\n          personsCopy.map((person) =>\n            person.id !== personsCopy[index].id ? person : response.data\n          )\n        );\n        setInfo({ name: \"\", number: \"\" });\n        handleSetMessage(\n          `${personsCopy[index].name}'s has changed successfully!`\n        );\n      })\n      .catch((_) => {\n        handleSetMessage(\n          `Information of ${personsCopy[index].name}'s has already been removed from server!`\n        );\n        setPersons(personsCopy.filter((n) => n.id !== personsCopy[index].id));\n      });\n  };\n\n  const handleClickAdd = (event) => {\n    event.preventDefault();\n    const nameObject = {\n      name: info.name,\n      number: info.number,\n    };\n\n    const personsCopy = [...persons];\n    const availableNameIndex = personsCopy.findIndex(\n      (person) => person.name === nameObject.name\n    );\n\n    if (availableNameIndex > -1) {\n      updatePhoneNumber(availableNameIndex);\n      return;\n    }\n\n    personService\n      .addPerson(nameObject)\n      .then((returnedPerson) => {\n        const allPersons = personsCopy.concat(returnedPerson);\n        setPersons(allPersons);\n        handleSetMessage(`Added ${info.name}`);\n        setInfo({ name: \"\", number: \"\" });\n      })\n      .catch((err) => {\n        handleSetMessage(err.response.data.error);\n      });\n\n  };\n\n  const handleNumberChange = (event) => {\n    setInfo({ ...info, number: event.target.value });\n  };\n\n  const handleNameChange = (event) => {\n    setInfo({ ...info, name: event.target.value });\n  };\n\n  const handleSearchChange = (event) => {\n    setSearchName(event.target.value);\n  };\n\n  const deletePersonHandler = (id) => {\n    const findPersonIndex = persons.findIndex((person) => person.id === id);\n    const deleteConfirm = window.confirm(\n      `Delete ${persons[findPersonIndex].name}?`\n    );\n    if (!deleteConfirm) return;\n    personService.deletePerson(id).then(() => {\n      const copyPersons = [...persons];\n      copyPersons.splice(findPersonIndex, 1);\n      setPersons(copyPersons);\n    });\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} />\n      <Filter searchName={searchName} handleSearchChange={handleSearchChange} />\n      <h3>Add a new</h3>\n      <PersonForm\n        handleClickAdd={handleClickAdd}\n        name={info.name}\n        number={info.number}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n      />\n      <h3>Numbers</h3>\n      <Persons\n        persons={persons}\n        searchName={searchName}\n        deletePersonHandler={deletePersonHandler}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}